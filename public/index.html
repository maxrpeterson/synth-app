<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>WDI Melville - Max Peterson Final Synth-app</title>
	<link rel="stylesheet" href="css/style.css">
	<script type="text/javascript" src="script/tone.js"></script>
	<script type="text/javascript" src="underscore/underscore.js"></script>
</head>
<body>
	<div id="fb-root"></div>
	<script>
		window.fbAsyncInit = function() {
		  FB.init({
		    appId      : '1611695462433996',
		    xfbml      : true,
		    version    : 'v2.4'
		  });
		};

		(function(d, s, id){
		   var js, fjs = d.getElementsByTagName(s)[0];
		   if (d.getElementById(id)) {return;}
		   js = d.createElement(s); js.id = id;
		   js.src = "//connect.facebook.net/en_US/sdk.js";
		   fjs.parentNode.insertBefore(js, fjs);
		 }(document, 'script', 'facebook-jssdk'));
	</script>

	<div class="not-keyboard">
		<header>
			<div class="save-load"></div>
			<div class="fb-login">
				<div class="fb-login-button" data-max-rows="1" data-size="small" data-show-faces="false" data-auto-logout-link="true" onlogin="checkLogin();"></div>
			</div>
			<h1>Synth-o-Matic</h1>
		</header>

		<div id="status">
		</div>

		<div class="controls">

			<div class="col" id="oscillators">
			</div>

			<div class="col" id="filter-amp">
			<section class="filter" data-area="filter">
				<h2>Filter</h2>
				<label>Type</label>

				<select data-area="filter" name="type">
				</select><br>

				<div class="control">
					<label>Cutoff</label>
					<div class="knob big" style="transform: rotate(135deg);" data-area="filter" data-control="frequency" data-min="20" data-max="20000" data-basevalue="20000" data-scale="exp" data-units="hz" data-origin="135">&deg;</div>
				</div>
				<div class="control">
					<label>Q</label>
					<div class="knob big" style="transform: rotate(-135deg);" data-area="filter" data-control="Q" data-min="0" data-max="16" data-basevalue="0" data-scale="linear" data-units="" data-origin="-135">&deg;</div>
				</div>
				<div class="control">
					<label>Env max (Amt.)</label>
					<div class="knob" style="transform: rotate(135deg)" data-area="filterEnvelope" data-control="max" data-min="0" data-max="20000" data-basevalue="20000" data-origin="135" data-units="" data-scale="linear">&deg;</div><br>
				</div>

				<div class="envelope">
				</div>

			</section>
			<section class="amp">
				<h2>Amplitude Envelope</h2>
				<div class="envelope">
				</div>
			</section>				
			</div>

			<div class="col" id="effects">
				<section class="delay">

				</section>
				<section class="reverb">
				</section>
				<section class="chorus">
				</section>
				<section class="visualizer">
				</section>
			</div>

		</div>
	</div>

	<div id="keyboard">
	</div>

	
	<script type="text/template" id="oscillator-template">
		<% for (var key in synth) { %>
			<% if (key.slice(0,3) === "osc") { %>
				<section class="osc <%= key %>">
					<h2>Oscillator <%= parseInt(key.slice(3,4)) + 1 %></h2>
					<label>Waveform</label>
					<select name="osc-type" data-area="<%= key %>">
						<%= optionsTemplate({options: waveforms}) %>
					</select><br>
					<div class="control">
						<label>Level</label>
						<div class="knob big" style="transform: rotate(-135deg);" data-area="<%= key %>" data-control="volume" data-min="-99" data-max="0" data-basevalue="-99" data-scale="linear" data-units="dB" data-origin="-135">&deg;</div>
					</div>
					<div class="control">
						<label>Detune</label>
						<div class="knob" style="transform: rotate(0deg);" data-area="<%= key %>" data-control="detune" data-min="-100" data-max="100" data-basevalue="0" data-scale="linear" data-units="cents" data-origin="0">&deg;</div>
					</div>
				</section>
			<% } %>
		<% } %>
	</script>

	<script type="text/template" id="options-template">
		<% options.forEach(function(option) { %>
			<option value="<%= option %>"><%= option.slice(0,1).toUpperCase() + option.slice(1) %></option>
		<% }) %>
	</script>

	<script type="text/template" id="amp-template">
		<section class="amp">
			<h2>Amplitude Envelope</h2>
			<div class="envelope">
			</div>
		</section>
	</script>

	<script type="text/template" id="envelope-template">
		<div class="control">
			<label>Attack</label>
			<input class="vertical" data-area="<%= area %>" type="range" name="attack" min="0.01" max="3" step="0.005" data-units="s" value="<%= env.attack %>">
		</div>
		<div class="control">
			<label>Decay</label>
			<input class="vertical" data-area="<%= area %>" type="range" name="decay" min="0" max="3" step="0.005" data-units="s" value="<%= env.decay %>">
		</div>
		<div class="control">
			<label>Sustain</label>
			<input class="vertical" data-area="<%= area %>" type="range" name="sustain" min="0" max="1" step="0.005" data-units="" value="<%= env.sustain %>">
		</div>
		<div class="control">
			<label>Release</label>
			<input class="vertical" data-area="<%= area %>" type="range" name="release" min="0" max="3" step="0.005" data-units="s" value="<%= env.release %>">
		</div>
	</script>

	<script type="text/javascript" src="script/polyosc.js"></script>
	<script type="text/javascript" src="qwerty-hancock/src/qwerty-hancock.js"></script>
	<script type="text/javascript" src="script/main.js"></script>
</body>
</html>